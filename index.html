<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>OK Player</title>
	<link rel="stylesheet" href="css/styles.css">



	<!-- Video.js Player -->
	<link href="https://vjs.zencdn.net/8.10.0/video-js.css" rel="stylesheet" />
	<script src="https://vjs.zencdn.net/8.10.0/video.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>

	<!-- webOS Integration -->
	<script src="webOSTVjs-1.2.10/webOSTV.js" charset="utf-8"></script>

	<!-- Icons -->
	<script src="js/icons.js"></script>


</head>

<body>

	<!-- Background Ambient Glow -->
	<div class="ambient-glow"></div>

	<!-- License Verification Screen -->
	<div id="license-screen" style="display: none;">
		<div class="license-container">
			<div class="license-title">License Verification</div>
			<div class="license-text">
				Your device is not activated. Please verify/subscribe at<br>
				<span style="color:#fff; font-weight:600;">okplayer.app</span>
			</div>

			<div class="qr-placeholder" id="license-qr"></div>

			<div class="license-text">Use your OKP ID to activate:</div>
			<div class="license-id-box" id="license-okp-id">LOADING...</div>

			<div class="license-text" style="font-size:14px; opacity:0.6;">
				Status: <span id="license-status">Checking...</span>
			</div>
			<button class="btn btn-primary focusable" onclick="window.location.reload()">Refresh Check</button>
		</div>
	</div>

	<div id="layout-container">
		<!-- Sidebar -->
		<aside id="main-sidebar">
			<div class="sidebar-header">
				<div class="logo">
					<img src="assets/ok_logo.svg" alt="OK Player Logo" class="sidebar-logo-img">
				</div>
			</div>

			<nav class="sidebar-nav">
				<div class="sidebar-nav-section">
					<div class="nav-item focusable active auto-trigger" data-target="home" tabindex="0">
						<span class="icon"><i data-lucide="home"></i></span>
					</div>
				</div>
				<div class="sidebar-nav-section">
					<div class="nav-item focusable auto-trigger" data-target="live" tabindex="0">
						<span class="icon"><i data-lucide="tv"></i></span>
					</div>
					<div class="nav-item focusable auto-trigger" data-target="movies" tabindex="0">
						<span class="icon"><i data-lucide="film"></i></span>
					</div>
					<div class="nav-item focusable auto-trigger" data-target="series" tabindex="0">
						<span class="icon"><i data-lucide="clapperboard"></i></span>
					</div>
					<div class="nav-item focusable auto-trigger" data-target="catchup" tabindex="0">
						<span class="icon"><i data-lucide="clock"></i></span>
					</div>

				</div>
				<div class="sidebar-nav-section">
					<div class="nav-item focusable auto-trigger" data-target="resources" tabindex="0">
						<span class="icon"><i data-lucide="folder-kanban"></i></span>
					</div>
					<div class="nav-item focusable auto-trigger" data-target="settings" tabindex="0">
						<span class="icon"><i data-lucide="settings"></i></span>
					</div>
				</div>
			</nav>
		</aside>

		<!-- Main Content Area -->
		<main id="main-content">

			<!-- Loading Overlay -->
			<div id="global-loader" class="loader-overlay" style="display:none;">
				<div class="spinner"></div>
				<p>Syncing Content...</p>
				<p id="global-loader-stats" style="margin-top:10px; font-size:0.9em; opacity:0.8; color:#aaa;">
					Initializing...</p>
				<button id="global-cancel-btn" class="btn btn-text focusable"
					style="margin-top:20px; border: 1px solid rgba(255,255,255,0.2); border-radius: 20px; padding: 5px 20px;">Cancel</button>
			</div>

			<!-- Views -->

			<!-- Home View -->
			<section id="home" class="view-section">
				<header class="section-header">
					<h1>Home</h1>
				</header>
				<div id="home-content">
					<!-- Welcome Section -->
					<div id="welcome-section" class="welcome-container">
						<div class="weather-panel">
							<div id="weather-icon-container" class="weather-icon-wrapper">
								<!-- Icon will be injected here -->
								<img id="weather-icon" src="" alt="Weather Icon" style="display:none;">
							</div>
							<div class="weather-info">
								<div id="weather-temp" class="weather-temp">--Â°C</div>
								<div class="weather-text-details">
									<div id="weather-desc" class="weather-desc">Loading Weather...</div>
									<div id="weather-location" class="weather-location"></div>
								</div>
							</div>
						</div>
						<div class="time-panel">
							<div id="current-time" class="big-time">--:--</div>
							<div id="current-date" class="current-date">--</div>
						</div>
					</div>

					<!-- Continue Watching Section -->
					<div id="continue-watching-section" style="display:none; padding: 40px;">
						<h2 class="section-title">Continue Watching</h2>
						<div id="continue-watching-carousel" class="favorites-grid"
							style="grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));"></div>
					</div>

					<!-- Favorite Channels Section -->
					<div id="home-fav-channels-section" style="display:none; padding: 40px;">
						<h2 class="section-title">Favorite Channels</h2>
						<div id="home-fav-channels-carousel" class="favorites-grid"
							style="grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));"></div>
					</div>

					<!-- Favorite Buckets Section -->
					<div id="home-fav-buckets-section" style="display:none; padding: 40px;">
						<h2 class="section-title">Favorite Buckets</h2>
						<div id="home-fav-buckets-carousel" class="favorites-grid"
							style="grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));"></div>
					</div>

					<!-- Favorite Movies Section -->
					<div id="home-fav-movies-section" style="display:none; padding: 40px;">
						<h2 class="section-title">Favorite Movies</h2>
						<div id="home-fav-movies-carousel" class="favorites-grid"
							style="grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));"></div>
					</div>

					<!-- Favorite Series Section -->
					<div id="home-fav-series-section" style="display:none; padding: 40px;">
						<h2 class="section-title">Favorite Series</h2>
						<div id="home-fav-series-carousel" class="favorites-grid"
							style="grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));"></div>
					</div>
				</div>
			</section>


			<!-- Live TV View -->
			<section id="live" class="view-section active">
				<header class="section-header">
					<h1>Live TV</h1>
					<div class="header-search-wrapper" style="display: flex; align-items: center;">
						<button class="search-reset-btn focusable" style="display:none;"
							data-target="live-search-input">
							<i data-lucide="x-circle"></i>
						</button>
						<div class="header-search-container">
							<i data-lucide="search" class="header-search-icon"></i>
							<input type="text" id="live-search-input" class="header-search-input focusable"
								placeholder="Search channels...">
						</div>
					</div>
				</header>
				<div class="content-rows" id="live-rows">
					<!-- Rows injected here -->
				</div>
			</section>

			<!-- Movies View -->
			<section id="movies" class="view-section">
				<header class="section-header">
					<h1>Movies</h1>
					<div class="header-search-wrapper" style="display: flex; align-items: center;">
						<button class="search-reset-btn focusable" style="display:none;"
							data-target="movies-search-input">
							<i data-lucide="x-circle"></i>
						</button>
						<div class="header-search-container">
							<i data-lucide="search" class="header-search-icon"></i>
							<input type="text" id="movies-search-input" class="header-search-input focusable"
								placeholder="Search movies...">
						</div>
					</div>
				</header>
				<div class="content-rows" id="movies-rows">
				</div>
			</section>

			<!-- Series View -->
			<section id="series" class="view-section">
				<header class="section-header">
					<h1>Series</h1>
					<div class="header-search-wrapper" style="display: flex; align-items: center;">
						<button class="search-reset-btn focusable" style="display:none;"
							data-target="series-search-input">
							<i data-lucide="x-circle"></i>
						</button>
						<div class="header-search-container">
							<i data-lucide="search" class="header-search-icon"></i>
							<input type="text" id="series-search-input" class="header-search-input focusable"
								placeholder="Search series...">
						</div>
					</div>
				</header>
				<div class="content-rows" id="series-rows">
				</div>
			</section>

			<!-- Catch Up View -->
			<section id="catchup" class="view-section">
				<header class="section-header">
					<h1>Catch Up</h1>
					<div class="header-search-wrapper" style="display: flex; align-items: center;">
						<button class="search-reset-btn focusable" style="display:none;"
							data-target="catchup-search-input">
							<i data-lucide="x-circle"></i>
						</button>
						<div class="header-search-container">
							<i data-lucide="search" class="header-search-icon"></i>
							<input type="text" id="catchup-search-input" class="header-search-input focusable"
								placeholder="Search channels...">
						</div>
					</div>
				</header>
				<div class="content-rows" id="catchup-rows">
					<!-- Rows injected here -->
				</div>
			</section>



			<!-- Resources View (Playlist Manager) -->
			<section id="resources" class="view-section">
				<header class="section-header">
					<h1>Playlist Resources</h1>
					<button id="add-playlist-btn" class="btn btn-glass focusable"><i data-lucide="plus"></i> Add
						Playlist</button>
				</header>

				<div class="resources-list" id="resources-list-container">
					<!-- Playlist items will be injected here -->
				</div>
			</section>

			<!-- Settings View -->
			<section id="settings" class="view-section">
				<header class="section-header">
					<h1>Settings</h1>
				</header>
				<div class="settings-container">



					<div class="setting-item focusable" tabindex="0">
						<div class="setting-info">
							<span class="setting-label">Clear Data</span>
							<span class="setting-description">Reset app and remove all playlists</span>
						</div>
						<button id="reset-app-btn" class="btn btn-danger">Reset App</button>
					</div>


					<div class="setting-item">
						<div class="setting-info setting-info-full">
							<span class="setting-label device-section-title">License Information</span>
							<div class="device-details-grid">
								<div class="device-detail-item">
									<span class="device-label">Status</span>
									<span id="license-info-status" class="device-value"
										style="color:var(--primary-color)">Checking...</span>
								</div>
								<div class="device-detail-item">
									<span class="device-label">Expires At</span>
									<span id="license-info-expires" class="device-value">-</span>
								</div>
							</div>
						</div>
					</div>

					<div class="setting-item">
						<div class="setting-info setting-info-full">
							<span class="setting-label device-section-title">Device Information</span>
							<div class="device-details-grid">
								<div class="device-detail-item">
									<span class="device-label">Model</span>
									<span id="device-model" class="device-value">-</span>
								</div>
								<div class="device-detail-item">
									<span class="device-label">SDK Version</span>
									<span id="device-sdk" class="device-value">-</span>
								</div>
								<div class="device-detail-item">
									<span class="device-label">Firmware</span>
									<span id="device-firmware" class="device-value">-</span>
								</div>
								<div class="device-detail-item">
									<span class="device-label">Device Name</span>
									<span id="device-name" class="device-value">-</span>
								</div>
								<div class="device-detail-item full-width">
									<span class="device-label">OKP ID</span>
									<span id="device-mac" class="device-value">-</span>
								</div>
							</div>
						</div>
					</div>
				</div>
			</section>

		</main>
	</div>

	<!-- Modals -->

	<!-- Add/Edit Playlist Modal -->
	<div id="playlist-modal" class="modal-overlay">
		<div class="modal-content glass-panel">
			<h3 id="playlist-modal-title">Add New Playlist</h3>
			<input type="hidden" id="edit-playlist-id" value="">
			<div class="input-group">
				<label>Name</label>
				<input type="text" id="new-playlist-name" class="focusable modal-input"
					placeholder="e.g. My Premium SUB">
			</div>
			<div class="modal-tabs">
				<button class="modal-tab active" data-tab="m3u">M3U List</button>
				<button class="modal-tab" data-tab="xtream">Xtream Codes</button>
			</div>

			<div id="tab-content-m3u" class="tab-content active">
				<div class="input-group">
					<label>M3U8 URL</label>
					<input type="text" id="new-playlist-url" class="focusable modal-input"
						placeholder="http://example.com/playlist.m3u">
				</div>
				<div class="input-group" id="file-import-group" style="text-align:center;">
					<span style="font-size:12px; opacity:0.7;">OR</span>
					<label for="local-file-importer" class="btn btn-glass focusable"
						style="display:inline-block; margin-top:5px;">Select Local File</label>
					<input type="file" id="local-file-importer" accept=".m3u,.m3u8" style="display:none;">
				</div>
			</div>

			<div id="tab-content-xtream" class="tab-content">
				<div class="input-group">
					<label>Server URL</label>
					<input type="text" id="xtream-host" class="focusable modal-input"
						placeholder="http://domain.com:port">
				</div>
				<div class="input-group">
					<label>Username</label>
					<input type="text" id="xtream-user" class="focusable modal-input" placeholder="username">
				</div>
				<div class="input-group">
					<label>Password</label>
					<input type="password" id="xtream-pass" class="focusable modal-input" placeholder="password">
				</div>
			</div>
			<div class="modal-actions">
				<button id="cancel-playlist-btn" class="btn btn-text focusable">Cancel</button>
				<button id="save-playlist-btn" class="btn btn-primary focusable">Save</button>
			</div>
		</div>
	</div>

	<script src="js/components/confirmation-modal.js"></script>
	<script src="js/components/media-card.js"></script>
	<script src="js/components/player-container.js"></script>
	<script src="js/components/view-layout-factory.js"></script>
	<script src="js/components/channel-list-item.js"></script>

	<!-- Player Overlay -->
	<div id="player-overlay">
		<div class="tv-static"></div>
		<!-- Logo Watermark -->
		<button id="close-player-btn" class="focusable" tabindex="0"><i data-lucide="x"></i></button>


		<!-- Controls Gradient Overlay -->
		<!-- <div class="player-controls-overlay"></div> -->

		<!-- Next Channel Preview Card -->

	</div>

	<!-- Scripts -->
	<style>
		.modal-tabs {
			display: flex;
			/* gap: 10px; */
			margin-bottom: 20px;
			border-bottom: 1px solid rgba(255, 255, 255, 0.1);
		}

		.modal-tabs>*+* {
			margin-left: 10px;
		}

		.modal-tab {
			background: none;
			border: none;
			color: rgba(255, 255, 255, 0.6);
			padding: 10px 15px;
			cursor: pointer;
			border-bottom: 2px solid transparent;
			transition: all 0.2s;
			font-size: 22px;
		}

		.modal-tab.active {
			color: #fff;
			border-bottom-color: var(--primary-color);
		}

		.tab-content {
			display: none;
		}

		.tab-content.active {
			display: block;
		}
	</style>
	<script src="js/name-processor.js"></script>
	<script src="js/parser.js"></script>
	<script src="js/xtream-client.js"></script>
	<script src="js/navigation.js"></script>

	<script src="js/videojs-player.js"></script>
	<script src="js/services/storage-service.js"></script>
	<script src="js/services/weather-service.js"></script>
	<script src="js/services/api-service.js"></script>
	<script src="js/managers/license-manager.js"></script>
	<script src="js/managers/favorites-manager.js"></script>

	<!-- Modular Architecture -->
	<script src="js/state.js"></script>
	<script src="js/utils/helpers.js"></script>
	<script src="js/views/home-view.js"></script>
	<script src="js/views/live-view.js"></script>
	<script src="js/views/vod-view.js"></script>
	<script src="js/views/settings-view.js"></script>

	<script src="js/managers/router.js"></script>
	<script src="js/managers/search-manager.js"></script>
	<script src="js/managers/playlist-manager.js"></script>
	<script src="js/managers/app-manager.js"></script>

</body>

</html>